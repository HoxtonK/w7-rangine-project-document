(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d0414b0"],{"02f4":function(e,t,a){var i=a("4588"),n=a("be13");e.exports=function(e){return function(t,a){var r,o,s=String(n(t)),l=i(a),c=s.length;return l<0||l>=c?e?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):r:e?s.slice(l,l+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var i=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?i(e,t).length:1)}},"0bfb":function(e,t,a){"use strict";var i=a("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,a){var i=a("52a7"),n=a("4630"),r=a("6821"),o=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=r(e),t=o(t,!0),l)try{return c(e,t)}catch(a){}if(s(e,t))return n(!i.f.call(e,t),e[t])}},1631:function(e,t,a){"use strict";var i=a("cb89"),n=a.n(i);n.a},"214f":function(e,t,a){"use strict";a("b0c5");var i=a("2aba"),n=a("32e9"),r=a("79e5"),o=a("be13"),s=a("2b4c"),l=a("520a"),c=s("species"),u=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var p=s(e),f=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),_=f?!r((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[p](""),!t})):void 0;if(!f||!_||"replace"===e&&!u||"split"===e&&!d){var g=/./[p],v=a(o,p,""[e],(function(e,t,a,i,n){return t.exec===l?f&&!n?{done:!0,value:g.call(t,a,i)}:{done:!0,value:e.call(a,t,i)}:{done:!1}})),h=v[0],m=v[1];i(String.prototype,e,h),n(RegExp.prototype,p,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var i=a("aae3"),n=a("cb7c"),r=a("ebd6"),o=a("0390"),s=a("9def"),l=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,p=[].push,f="split",_="length",g="lastIndex",v=4294967295,h=!u((function(){RegExp(v,"y")}));a("214f")("split",2,(function(e,t,a,u){var m;return m="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[_]||2!="ab"[f](/(?:ab)*/)[_]||4!="."[f](/(.?)(.?)/)[_]||"."[f](/()()/)[_]>1||""[f](/.?/)[_]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(n,e,t);var r,o,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?v:t>>>0,h=new RegExp(e.source,u+"g");while(r=c.call(h,n)){if(o=h[g],o>d&&(l.push(n.slice(d,r.index)),r[_]>1&&r.index<n[_]&&p.apply(l,r.slice(1)),s=r[0][_],d=o,l[_]>=f))break;h[g]===r.index&&h[g]++}return d===n[_]?!s&&h.test("")||l.push(""):l.push(n.slice(d)),l[_]>f?l.slice(0,f):l}:"0"[f](void 0,0)[_]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,i){var n=e(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,n,i):m.call(String(n),a,i)},function(e,t){var i=u(m,e,this,t,m!==a);if(i.done)return i.value;var c=n(e),p=String(this),f=r(c,RegExp),_=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),b=new f(h?c:"^(?:"+c.source+")",g),y=void 0===t?v:t>>>0;if(0===y)return[];if(0===p.length)return null===l(b,p)?[p]:[];var w=0,x=0,C=[];while(x<p.length){b.lastIndex=h?x:0;var D,k=l(b,h?p:p.slice(x));if(null===k||(D=d(s(b.lastIndex+(h?0:x)),p.length))===w)x=o(p,x,_);else{if(C.push(p.slice(w,x)),C.length===y)return C;for(var M=1;M<=k.length-1;M++)if(C.push(k[M]),C.length===y)return C;x=w=D}}return C.push(p.slice(w)),C}]}))},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3b2b":function(e,t,a){var i=a("7726"),n=a("5dbc"),r=a("86cc").f,o=a("9093").f,s=a("aae3"),l=a("0bfb"),c=i.RegExp,u=c,d=c.prototype,p=/a/g,f=/a/g,_=new c(p)!==p;if(a("9e1e")&&(!_||a("79e5")((function(){return f[a("2b4c")("match")]=!1,c(p)!=p||c(f)==f||"/a/i"!=c(p,"i")})))){c=function(e,t){var a=this instanceof c,i=s(e),r=void 0===t;return!a&&i&&e.constructor===c&&r?e:n(_?new u(i&&!r?e.source:e,t):u((i=e instanceof c)?e.source:e,i&&r?l.call(e):t),a?this:d,c)};for(var g=function(e){e in c||r(c,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},v=o(u),h=0;v.length>h;)g(v[h++]);d.constructor=c,c.prototype=d,a("2aba")(i,"RegExp",c)}a("7a56")("RegExp")},4917:function(e,t,a){"use strict";var i=a("cb7c"),n=a("9def"),r=a("0390"),o=a("5f1b");a("214f")("match",1,(function(e,t,a,s){return[function(a){var i=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,i):new RegExp(a)[t](String(i))},function(e){var t=s(a,e,this);if(t.done)return t.value;var l=i(e),c=String(this);if(!l.global)return o(l,c);var u=l.unicode;l.lastIndex=0;var d,p=[],f=0;while(null!==(d=o(l,c))){var _=String(d[0]);p[f]=_,""===_&&(l.lastIndex=r(c,n(l.lastIndex),u)),f++}return 0===f?null:p}]}))},"49f7":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"document-setting"},[e.showAddManage?e._e():a("div",{staticClass:"document-setting-warpper"},[a("div",{staticClass:"nav"},[a("div",{staticClass:"nav-item",class:{active:0==e.active},on:{click:function(t){return e.onClickNav(0)}}},[0==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n        项目概览\n      ")]),a("div",{staticClass:"nav-item",class:{active:1==e.active},on:{click:function(t){return e.onClickNav(1)}}},[1==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n        权限管理\n      ")]),a("div",{staticClass:"nav-item",class:{active:2==e.active},on:{click:function(t){return e.onClickNav(2)}}},[2==e.active?a("p",{staticClass:"light-line"}):e._e(),e._v("\n        历史记录\n      ")])]),a("div",{staticClass:"content"},[0==e.active?a("div",{staticClass:"project"},[a("el-form",{key:"doc",ref:"docForm",staticClass:"w7-form__no-required-icon",attrs:{model:e.docData,rules:e.rules,"label-width":"85px","label-position":"left"}},[a("el-form-item",{staticClass:"cover-warpper",attrs:{label:"项目封面"}},[a("div",{staticClass:"upload-wrap"},[a("el-upload",{ref:"upload",attrs:{action:"/admin/upload/image",accept:".jpg,.jpeg,.png","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"cover-img"},[e.docData.cover?a("img",{attrs:{src:e.docData.cover}}):e._e()])]),a("div",{staticClass:"cover-btn"},[a("el-upload",{ref:"upload",attrs:{action:"/admin/upload/image",accept:".jpg,.jpeg,.png","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("el-button",{attrs:{type:"primary",plain:""}},[e._v("上传封面")])],1),a("el-button",{staticClass:"cover-default",on:{click:function(t){e.docData.cover=""}}},[e._v("默认封面")])],1)],1),a("div",{staticClass:"el-upload__tip"},[e._v("格式要求：支持jpg、jpeg、png格式，图片小于5M，最佳图片比例2:1。")])]),a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{model:{value:e.docData.name,callback:function(t){e.$set(e.docData,"name",t)},expression:"docData.name"}})],1),a("el-form-item",{attrs:{label:"公开性质"}},[a("el-select",{model:{value:e.docData.is_public,callback:function(t){e.$set(e.docData,"is_public",t)},expression:"docData.is_public"}},[a("el-option",{attrs:{label:"公开项目",value:"1"}}),a("el-option",{attrs:{label:"私有项目",value:"2"}})],1)],1),1!=e.docData.is_public?a("el-form-item",{attrs:{label:"查看权限"}},[a("el-select",{model:{value:e.docData.login_preview,callback:function(t){e.$set(e.docData,"login_preview",t)},expression:"docData.login_preview"}},[a("el-option",{attrs:{label:"仅限有权限者查看",value:"2"}}),a("el-option",{attrs:{label:"点击链接登录后查看",value:"3"}})],1)],1):e._e()],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveDoc}},[e._v("保存")]),a("el-button",{on:{click:e.delDoc}},[e._v("删除")])],1)],1):e._e(),1==e.active?a("div",{staticClass:"manage"},[a("div",{staticClass:"top"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.openAddManage}},[e._v("添加权限")])],1),a("el-table",{key:"manageTable",staticClass:"w7-table",attrs:{"max-height":"370",data:e.details.operator,"header-cell-style":{background:"#f7f9fc",color:"#606266"}}},[a("el-table-column",{attrs:{prop:"username",label:"名称",width:"300px"}}),a("el-table-column",{attrs:{label:"身份",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.acl.role?a("div",{staticClass:"identity"},[e._v(e._s(t.row.acl.name))]):[e._v(e._s(t.row.acl.name))]]}}],null,!1,565636675)}),a("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"oper"},[e._e(),a("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"bottom"}},[e.details.acl.has_manage&&1!=t.row.acl.role?a("i",{staticClass:"wi wi-delete",on:{click:function(a){return e.removeManage(t.row.id)}}}):e._e()]),e.shwoEditRole&&e.selectUserId==t.row.id?a("div",{staticClass:"edit-role"},[a("div",{staticClass:"edit-role-content"},[a("div",{staticClass:"label"},[e._v("权限:")]),a("el-select",{model:{value:e.selectUserRole,callback:function(t){e.selectUserRole=t},expression:"selectUserRole"}},e._l(e.role_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("div",{staticClass:"edit-role-foot"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.shwoEditRole=!1}}},[e._v("取消")])],1)]):e._e()],1)}}],null,!1,2410352421)})],1)],1):e._e(),2==e.active?a("div",{staticClass:"history"},[a("el-table",{key:"historyTable",ref:"historyTableRef",staticClass:"w7-table",attrs:{data:e.historyList,"max-height":"370"}},[a("el-table-column",{attrs:{prop:"remark",label:"描述"}}),a("el-table-column",{attrs:{prop:"time",label:"时间",align:"right"}})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total","prev-text":"上一页","next-text":"下一页","page-size":5,"current-page":e.currentPageHistory,"page-count":e.pageCountHistory,"hide-on-single-page":!0},on:{"current-change":e.getHistory,"update:currentPage":function(t){e.currentPageHistory=t},"update:current-page":function(t){e.currentPageHistory=t}}})],1):e._e()])]),e.showAddManage?a("div",{staticClass:"add-manage-header"},[a("el-link",{attrs:{underline:!1},on:{click:function(t){e.showAddManage=!1}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("添加权限")]),a("el-link",{attrs:{underline:!1},on:{click:function(t){e.showAddManage=!1}}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),e.showAddManage?a("div",{staticClass:"add-manage-body"},[a("el-form",{key:"addManage",ref:"addManageForm",staticClass:"w7-form__no-required-icon",attrs:{model:e.addManageData,rules:e.rules,"label-width":"85px","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addManageData.username,callback:function(t){e.$set(e.addManageData,"username",t)},expression:"addManageData.username"}})],1),a("el-form-item",{attrs:{label:"操作员权限"}},[a("el-select",{model:{value:e.addManageData.role,callback:function(t){e.$set(e.addManageData,"role",t)},expression:"addManageData.role"}},e._l(e.role_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"add-manage-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addManage}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.showAddManage=!1}}},[e._v("取 消")])],1)],1):e._e()])},n=[],r=(a("6b54"),a("7f7f"),{name:"setting",props:["id"],data:function(){return{active:0,details:"",docData:{cover:"",name:"",is_public:"1",login_preview:"2",is_public_Copy:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"change"}],username:[{required:!0,message:"请输入用户名",trigger:"change"}]},addManageData:{},role_list:[],showAddManage:!1,shwoEditRole:!1,selectUserId:"",selectUserRole:"",historyList:[],currentPageHistory:1,pageCountHistory:0,totalHistory:0}},watch:{id:function(e,t){this.active=0,this.getdetails()}},created:function(){this.getdetails()},methods:{onClickNav:function(e){2==e&&this.getHistory(),this.active=e},getdetails:function(){var e=this;this.$post("/admin/document/detail",{document_id:this.id}).then((function(t){e.details=t.data;var a="",i="";1==t.data.is_public?(i=2,a=1):(t.data.is_public,i=t.data.is_public,a=2),e.docData={cover:t.data.cover||"",name:t.data.name,is_public:a,login_preview:i,is_public_Copy:t.data.is_public},e.docData.is_public=e.docData.is_public.toString(),e.docData.login_preview=e.docData.login_preview.toString(),e.role_list=t.data.role_list,e.addManageData.role=t.data.role_list[0].id}))},getHistory:function(){var e=this;this.$post("/admin/operate-log/get-by-document ",{document_id:this.id,page:this.currentPageHistory}).then((function(t){e.historyList=t.data.data||[],e.pageCountHistory=t.data.page_count,e.totalHistory=t.data.total,e.$refs.historyTableRef.bodyWrapper.scrollTop=0}))},handleAvatarSuccess:function(e){this.docData.cover=e.data.url},beforeAvatarUpload:function(e){var t="image/jpg"===e.type||"image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;return t||this.$message.error("上传图片只支持jpg、jpeg、png格式!"),a||this.$message.error("上传图片大小不能超过 5MB!"),t&&a},saveDoc:function(){var e=this,t=this.docData.cover,a=this.docData.name,i=this.docData.login_preview,n=this.docData.is_public;n=1==n?1:2==i?2:3,this.$refs["docForm"].validate((function(i){i&&e.$post("/admin/document/update",{document_id:e.details.id,cover:t,name:a,is_public:n}).then((function(){e.$message({type:"success",message:"保存成功!"})}))}))},delDoc:function(){var e=this;this.$confirm("此操作将永久删除该文档, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$post("/admin/document/delete",{document_id:e.details.id}).then((function(){e.$parent.handleClose(),e.$message({type:"success",message:"删除成功!"})}))}))},editManage:function(e){this.selectUserId=e.id,this.selectUserRole=e.acl.role,this.shwoEditRole=!0},editRole:function(){var e=this;this.$post("/admin/document/operator",{user_id:this.selectUserId,document_id:this.id,permission:this.selectUserRole}).then((function(){e.getdetails(),e.shwoEditRole=!1}))},removeManage:function(e){var t=this;this.$confirm("确定删除该操作员吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$post("/admin/document/operator",{user_id:e,document_id:t.id}).then((function(){t.getdetails(),t.$message("删除成功！")}))}))},openAddManage:function(){this.addManageData={username:"",role:this.role_list[0].id||""},this.showAddManage=!0},addManage:function(){var e=this,t=!0;for(var a in this.details.operator)if(this.details.operator[a].username==this.addManageData.username)return this.$message("用户已存在"),void(t=!1);t&&this.$refs["addManageForm"].validate((function(t){t&&e.$post("/admin/document/operator",{user_name:e.addManageData.username,document_id:e.id,permission:e.addManageData.role}).then((function(){e.getdetails(),e.$message("添加成功！"),e.showAddManage=!1}))}))},uploadCover:function(){this.$refs.upload.uploadFiles()}}}),o=r,s=(a("ab0c"),a("2877")),l=Object(s["a"])(o,i,n,!1,null,null,null);t["a"]=l.exports},"4ec3":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"f",(function(){return d}));var i=a("a27e"),n=function(e){return Object(i["a"])({url:"/admin/document/create",data:e,method:"post"})},r=function(e){return Object(i["a"])({url:"/admin/chapter/create",data:e,method:"post"})},o=function(e){return Object(i["a"])({url:"/admin/document/chapterapi/getApiLabel",data:e,method:"get"})},s=function(e){return Object(i["a"])({url:"/admin/chapter/save",data:e,method:"post"})},l=function(e){return Object(i["a"])({url:"/admin/chapter/content",data:e,method:"post"})},c=function(e){return Object(i["a"])({url:"/admin/document/all",data:e,method:"post"})},u=function(e){return Object(i["a"])({url:"/admin/chapter/detail",data:e,method:"post"})},d=function(e){return Object(i["a"])({url:"/common/auth/logout",data:e,method:"post"})}},"520a":function(e,t,a){"use strict";var i=a("0bfb"),n=RegExp.prototype.exec,r=String.prototype.replace,o=n,s="lastIndex",l=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[s]||0!==t[s]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(o=function(e){var t,a,o,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",i.call(d))),l&&(t=d[s]),o=n.call(d,e),l&&o&&(d[s]=d.global?o.index+o[0].length:t),c&&o&&o.length>1&&r.call(o[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),e.exports=o},"5dbc":function(e,t,a){var i=a("d3f4"),n=a("8b97").set;e.exports=function(e,t,a){var r,o=t.constructor;return o!==a&&"function"==typeof o&&(r=o.prototype)!==a.prototype&&i(r)&&n&&n(e,r),e}},"5f1b":function(e,t,a){"use strict";var i=a("23c6"),n=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var r=a.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"6b54":function(e,t,a){"use strict";a("3846");var i=a("cb7c"),n=a("0bfb"),r=a("9e1e"),o="toString",s=/./[o],l=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?l((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?n.call(e):void 0)})):s.name!=o&&l((function(){return s.call(this)}))},"8b97":function(e,t,a){var i=a("d3f4"),n=a("cb7c"),r=function(e,t){if(n(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,a){return r(e,a),t?e.__proto__=a:i(e,a),e}}({},!1):void 0),check:r}},9093:function(e,t,a){var i=a("ce10"),n=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},a481:function(e,t,a){"use strict";var i=a("cb7c"),n=a("4bf8"),r=a("9def"),o=a("4588"),s=a("0390"),l=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,_=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,(function(e,t,a,g){return[function(i,n){var r=e(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,r,n):a.call(String(r),i,n)},function(e,t){var n=g(a,e,this,t);if(n.done)return n.value;var d=i(e),p=String(this),f="function"===typeof t;f||(t=String(t));var h=d.global;if(h){var m=d.unicode;d.lastIndex=0}var b=[];while(1){var y=l(d,p);if(null===y)break;if(b.push(y),!h)break;var w=String(y[0]);""===w&&(d.lastIndex=s(p,r(d.lastIndex),m))}for(var x="",C=0,D=0;D<b.length;D++){y=b[D];for(var k=String(y[0]),M=c(u(o(y.index),p.length),0),E=[],j=1;j<y.length;j++)E.push(_(y[j]));var P=y.groups;if(f){var O=[k].concat(E,M,p);void 0!==P&&O.push(P);var S=String(t.apply(void 0,O))}else S=v(k,p,M,E,P,t);M>=C&&(x+=p.slice(C,M)+S,C=M+k.length)}return x+p.slice(C)}];function v(e,t,i,r,o,s){var l=i+e.length,c=r.length,u=f;return void 0!==o&&(o=n(o),u=p),a.call(s,u,(function(a,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(l);case"<":s=o[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>c){var p=d(u/10);return 0===p?a:p<=c?void 0===r[p-1]?n.charAt(1):r[p-1]+n.charAt(1):a}s=r[u-1]}return void 0===s?"":s}))}}))},aae3:function(e,t,a){var i=a("d3f4"),n=a("2d95"),r=a("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==n(e))}},ab0c:function(e,t,a){"use strict";var i=a("e2d2"),n=a.n(i);n.a},ac6a:function(e,t,a){for(var i=a("cadf"),n=a("0d58"),r=a("2aba"),o=a("7726"),s=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),p=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},_=n(f),g=0;g<_.length;g++){var v,h=_[g],m=f[h],b=o[h],y=b&&b.prototype;if(y&&(y[u]||s(y,u,p),y[d]||s(y,d,h),l[h]=p,m))for(v in i)y[v]||r(y,v,i[v],!0)}},b0c5:function(e,t,a){"use strict";var i=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},b56e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"page-head"},[e._v("我的文档管理")]),a("div",{staticClass:"container-box"},[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-box-input"},[a("el-input",{staticClass:"demo-input-suffix",attrs:{placeholder:"请输入文档名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getAllProject(t)}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.getAllProject},slot:"suffix"})]),a("el-select",{on:{change:e.getAllProject},model:{value:e.listQuery.is_public,callback:function(t){e.$set(e.listQuery,"is_public",t)},expression:"listQuery.is_public"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"公有",value:"1"}}),a("el-option",{attrs:{label:"私有",value:"2"}})],1),a("el-select",{on:{change:e.getAllProject},model:{value:e.listQuery.role,callback:function(t){e.$set(e.listQuery,"role",t)},expression:"listQuery.role"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"我创建的",value:"1"}}),a("el-option",{attrs:{label:"我操作的",value:"2"}})],1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"card-box"},[a("div",{staticClass:"card-warpper"},[e._l(e.docList,(function(t,i){return a("div",{key:i,staticClass:"w7-card",class:{"has-cover":t.cover},style:{backgroundImage:"url("+t.cover+")"},on:{click:function(a){return e.goChapter(t)}}},[t.cover?a("div",{staticClass:"mask"}):e._e(),a("div",{staticClass:"mask-content"},[a("div",{staticClass:"w7-card-title"},[e._v("\n              "+e._s(t.name)+"\n            ")]),a("div",{staticClass:"time-wrap"},[t.is_public?e._e():a("i",{staticClass:"wi wi-lock"}),a("div",{staticClass:"w7-card-time"},[e._v(e._s(e.format(t.operator.time))+" "+e._s(t.operator.name))])]),a("div",{staticClass:"icon-box"},[t.acl.has_manage?a("el-tooltip",{attrs:{effect:"dark",content:"转让项目",placement:"bottom"}},[a("i",{staticClass:"wi wi-transfer",on:{click:function(a){return a.stopPropagation(),e.transferDoc(t.id)}}})]):e._e(),a("el-tooltip",{attrs:{effect:"dark",content:"预览",placement:"bottom"}},[a("i",{staticClass:"wq wq-chakan",on:{click:function(a){return a.stopPropagation(),e.readDoc(t)}}})]),t.acl.has_manage?a("el-tooltip",{attrs:{effect:"dark",content:"进入管理",placement:"bottom"}},[a("i",{staticClass:"wi wi-guanli",on:{click:function(a){return a.stopPropagation(),e.settingDoc(t.id)}}})]):e._e()],1),a("div",{staticClass:"line"})])])})),a("div",{staticClass:"w7-card add-project",on:{click:e.dialogDocShow}},[a("div",{staticClass:"add-text"},[e._v("新建项目")]),a("i",{staticClass:"el-icon-circle-plus"}),a("div",{staticClass:"line"})])],2)]),a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{background:"","hide-on-single-page":e.total<=11,"current-page":e.listQuery.page,"page-sizes":[11,23,35],"page-size":e.listQuery.page_size,layout:e.paginationLayouts,total:e.total},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"page",t)},"update:current-page":function(t){return e.$set(e.listQuery,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{staticClass:"w7-dialog",attrs:{title:"创建项目",visible:e.dialogDocInfoVisible,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogDocInfoVisible=t}}},[a("el-form",{attrs:{"label-width":"105px","label-position":"left"}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-radio-group",{staticClass:"ownership",model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("公开项目")]),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("私有项目")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createDoc}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogDocInfoVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{staticClass:"w7-dialog",attrs:{title:"管理员转让",visible:e.dialogTransferDoc,"close-on-click-modal":!1,center:""},on:{"update:visible":function(t){e.dialogTransferDoc=t}}},[a("div",{staticClass:"transfer-tip"},[a("i",{staticClass:"el-icon-warning"}),e._v("转让管理员权限后您将成为操作员，不再是管理员，请谨慎操作。\n      ")]),a("el-form",{attrs:{"label-width":"115px","label-position":"left"}},[a("el-form-item",{attrs:{label:"选择新的管理员"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.transferUsername,callback:function(t){e.transferUsername=t},expression:"transferUsername"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.transfer}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogTransferDoc=!1}}},[e._v("取 消")])],1)],1)],1),a("el-dialog",{staticClass:"we7-dialog dialog-setting",attrs:{title:"项目设置",width:"1000px",visible:e.showSetting,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.showSetting=t}}},[a("setting",{attrs:{id:e.settingDocId}})],1)],1)},n=[],r=(a("ac6a"),a("7f7f"),a("fa7d")),o=a("4ec3"),s=a("49f7"),l={name:"documentIndex",components:{setting:s["a"]},data:function(){return{listQuery:{page:1,page_size:11,keyword:"",role:"",is_public:""},radio:"1",loading:!1,docList:[],currentPage:0,page_size:19,pageCount:0,total:0,name:"",dialogDocInfoVisible:!1,actClass:"actClass",dialogTransferDoc:!1,transferUsername:"",selectDocId:"",showSetting:!1,settingDocId:""}},computed:{paginationLayouts:function(){return this.total&&this.total/this.listQuery.page_size>1?"total, sizes, prev, pager, next, jumper":"total, sizes"}},created:function(){this.getAllProject()},methods:{dialogDocShow:function(){this.dialogDocInfoVisible=!0,this.name=""},getAllProject:function(){var e=this;this.loading=!0,Object(o["d"])(this.listQuery).then((function(t){200==t.code&&(e.docList=t.data.data,e.pageCount=t.data.page_count,e.total=t.data.total,e.loading=!1)}))},createDoc:function(){var e=this;Object(o["b"])({name:this.name,is_public:this.radio}).then((function(t){e.$message("创建成功！"),e.dialogDocInfoVisible=!1,e.getAllProject()}))},removeDoc:function(e){var t=this;this.$confirm("确定删除该文档吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$post("/admin/document/delete",{id:e}).then((function(){t.getAllProject(),t.$message("删除成功！")}))}))},updateDoc:function(e,t){var a=this;this.$post("/admin/document/update",{id:e,is_show:1==t?2:1}).then((function(){a.docList.forEach((function(a){a.id!=e||(a.is_show=1==t?2:1)}))}))},readDoc:function(e){var t=this.$router.resolve({path:"/chapter/"+e.id});localStorage.projectName=e.name,window.open(t.href,"_blank")},settingDoc:function(e){this.settingDocId=e,this.showSetting=!0},transferDoc:function(e){this.selectDocId=e,this.transferUsername="",this.dialogTransferDoc=!0},transfer:function(){var e=this;this.$post("/admin/document/change-founder",{document_id:this.selectDocId,username:this.transferUsername}).then((function(){e.getAllProject(),e.$message("转让成功！"),e.dialogTransferDoc=!1}))},goChapter:function(e,t){var a={name:"chapter",params:{id:e.id}};t&&(a["query"]={type:"add",documentType:1}),localStorage.projectName=e.name,this.$router.push(a)},format:function(e){if(e){var t=Object(r["a"])(e);return t.length>8?Object(r["a"])(e).slice(5):Object(r["a"])(e)}},handleClose:function(){this.getAllProject(),this.showSetting=!1},handleSizeChange:function(e){this.listQuery.page_size=e,this.getAllProject()},handleCurrentChange:function(e){this.listQuery.page=e,this.getAllProject()}}},c=l,u=(a("1631"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,"9be307aa",null);t["default"]=d.exports},cb89:function(e,t,a){},e2d2:function(e,t,a){},fa7d:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return timestampFormat}));var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__);function getUrlParam(e,t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)");if(e&&e.split("?")[1]){var i=e.split("?")[1].match(a);return null!=i?unescape(i[2]):null}}function replaceParamVal(url,paramName,replaceVal){var oUrl=url.toString(),re=eval("/("+paramName+"=)([^&]*)/gi"),nUrl=oUrl.replace(re,paramName+"="+replaceVal);return nUrl}function timestampFormat(e){var t=Date.parse(e)/1e3;function a(e){return(1==String(e).length?"0":"")+e}var i=parseInt((new Date).getTime()/1e3),n=i-t,r=new Date(1e3*i),o=new Date(1e3*t),s=o.getFullYear(),l=o.getMonth()+1,c=o.getDate(),u=o.getHours(),d=o.getMinutes();if(n<60)return"刚刚";if(n<3600)return Math.floor(n/60)+"分钟前";if(r.getFullYear()==s&&r.getMonth()+1==l&&r.getDate()==c)return"今天"+a(u)+":"+a(d);var p=new Date(1e3*(i-86400));return p.getFullYear()==s&&p.getMonth()+1==l&&p.getDate()==c?"昨天"+a(u)+":"+a(d):s+"年"+a(l)+"月"+a(c)+"日 "+a(u)+":"+a(d)}}}]);